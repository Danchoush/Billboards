# Курсовой проект по дисциплине "БАЗЫ ДАННЫХ" на тему: “НАРУЖНАЯ РЕКЛАМА”
## Описание предметной области:
Для размещения наружной рекламы используются билборды.

Билборд имеет следующие параметры: уникальный номер, стоимость, размер в метрах
квадратных,название улицы, где он установлен, показатель качества.
Каждый билборд имеет своего владельца, о котором известны:
уникальный номер, фамилия, адрес, год рождения, телефон. Билборды
сдаются в аренду арендаторам на фиксированный срок. О каждом
арендаторе известны: уникальный номер, фамилия, телефон, адрес, сфера
бизнеса.

Сведения об аренде билбордов сохраняются в расписании. Для
каждого факта аренды конкретного билборда конкретным арендатором в
расписании проставляются даты начала и конца аренды. Для оформления
аренды с каждым арендатором составляется заказ. Каждый заказ имеет
уникальный номер, дату оформления и общую стоимость заказа. В рамках
одного заказа арендатор может арендовать несколько билбордов, поэтому
каждый заказ может состоять из множества строк заказа. Каждая строка
заказа относиться к одному арендуемому билборду, имеет уникальный
номер и содержит даты начала и конца аренды, а также ее стоимость.
Сведения об аренде по каждому новому заказу переносятся в расписание с
помощью специальных программ.
## Описание алгоритмов работы прогрограммы:
### Конечные пользователи:
- Аналитик
- Владелец
- Клиент

### Варианты использования системы:

![Варианты использования системы:](/static/images/variants.png)

### Система авторизации:

В базе данных хранятся две служебные таблицы internal_user и external_user,
хранящие сведения о зарегистрированных пользователях.Таблица internal_users хранит
сведения о внутренних пользователях - их id, роль, пароль и логин. Таблица
external_user, имеет те же столбцы, что и таблица internal_users, но столбец
относящийся к роли пользователя пустой, так как у внешних пользователей нет ролей.

На программном уровне необходимо обеспечить каждой роли доступ только к
тому варианту использования, который назначен. Каждый контроллер должен
проверять, пользователь с какой ролью к нему обращается и хочет его запустить.

## Описание основных вариантов использования и сценарии к ним:

### Выполнение запроса:

1. Пользователь входит в систему.
2. Отображается форма с выбором запроса.
3. Выбор необходимого пользователю варианта.
4. Отображение формы с выбором параметра запроса.
5. Ввод данных для формирования sql-запроса.
6. Отображения формы с результатами sql-запроса.
   
   Расширение:
   
  6а. При неправильном вводе данных - вывод сообщения об ошибке и повторный
запрос данных.

### Авторизация:

1. Пользователь начинает авторизацию.
2. Отображается форма ввода логина и пароля.
3. Пользователь вводит свой логин и пароль.
4. Система присваивает пользователю группу и отображает соответствующее меню.
  
     Расширение:
  
  4а. При неправильном вводе данных - вывод сообщения об ошибке и повторный
запрос данных.

### Отчеты:

1. Пользователь начинает работу с отчетами.
2. Система присылает страницу с выбором "просмотр" и "создать"
3. Пользователь нажимает кнопку "создать".
4. Система присылает форму для ввода месяца и года.
5. Пользователь вводит параметры и отправляет данные системе.
6. Система присылает сообщение "отчет успешно создан" и дает возможность
вернуться к списку отчетов.
7. Пользователь нажимает кнопку "просмотр".
8. Система присылает форму для ввода месяца и года просматриваемого года.
9. Пользователь вводит параметры и отправляет данные системе.
10. Система присылает динамический шаблон с запрошенным отчетом.

### Заказ билбордов:

1. Пользователь начинает работу с заказом.
2. Система присылает страницу с выбором доступных билбордов и для каждого из
них присутствуют поля ввода даты и периода аренды в месяцах и кнопки
“Дополнительная информация” и “Добавить” . Также есть кнопки очистки
заказа, сохранения заказа и ссылка для возврата в меню внешнего пользователя.
3. Пользователь нажимает кнопку "Дополнительная информация".
4. Система форму с подробной информацией о выбранном билборде, расписание
его аренды и кнопку возврата к оформлению заказа.
5. Пользователь нажимает кнопку "Возврат в меню".
6. Пользователь вводит дату начала аренды и период с помощью полей ввода и
нажимает кнопку "Добавить".
7. Система присылает ту же форму, но уже с соответственным билбордом в поле
заказа.
8. Пользователь нажимает кнопку “Очистить заказ”.
9. Система присылает ту же форму, но уже с пустым полем заказа.
10. Пользователь нажимает кнопку "Оформить заказ".
11. Система присылает форму с сообщением об успешном оформлении заказа и
кнопку возврата к оформлению заказа.
12. Пользователь нажимает кнопку "Возврат в меню".
13. Пользователь возвращается на 2-й этап сценария.

    ## Общая файловая структура:

    ![Варианты использования системы:](/static/images/file_arch_new.png)
